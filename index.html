<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Розклад 5Б</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }
        .container {
            max-width: 800px;
            margin: auto;
        }
        .day-schedule {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: none; /* Приховано за замовчуванням */
        }
        .day-schedule.active {
            display: block; 
        }
        .header-section {
            margin-bottom: 20px;
        }
        .button-group {
            margin-top: 10px;
            margin-bottom: 20px;
        }
        button {
            padding: 10px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin-right: 5px;
        }
        button.active {
            background-color: #0056b3;
            font-weight: bold;
        }
        button:hover {
            opacity: 0.9;
        }
        h2 {
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #007bff;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-section">
            <h3 id="main-title">Розклад на сьогодні</h3>
            <div class="week-info" id="week-status"></div>
            
            <div class="button-group">
                <button id="btn-today" class="active">Сьогодні</button>
                <button id="btn-odd-week">Непарний</button>
                <button id="btn-even-week">Парний</button>
            </div>
        </div>
        
        <div id="schedule-container">
            <!-- Сюди буде завантажено розклад -->
        </div>
        
        <div id="no-schedule-message" style="display: none;">
            <p>Розклад на цей день відсутній.</p>
        </div>

        <!-- Оригінальні блоки розкладу приховані -->
        <div id="hidden-schedules" style="display: none;">
            
            <div id="monday" class="day-schedule">
                <h2>Понеділок</h2>
                <table>
                    <tr><th>Час</th><th>Урок</th><th>Кабінет</th></tr>
                    <tr><td>12:45-13:30</td><td>Фізкультура</td><td></td></tr>
                    <tr><td>13:45-14:30</td><td>Математика</td><td>204</td></tr>
                    <tr><td>14:45-15:30</td><td>Інформатика</td><td>201</td></tr>
                    <tr><td>15:40-16:25</td><td>Англ. мова</td><td>320/313</td></tr>
                    <tr><td>16:35-17:20</td><td>Укр. мова</td><td>304</td></tr>
                </table>
            </div>

            <div id="tuesday" class="day-schedule">
                <h2>Вівторок</h2>
                 <table>
                    <tr><th>Час</th><th>Урок</th><th>Кабінет</th></tr>
                    <tr><td>10:55-11:40</td><td>Укр. літ.</td><td>218</td></tr>
                    <tr><td>11:50-12:35</td><td>Пізнаємо природу</td><td>319</td></tr>
                    <tr><td>12:45-13:30</td><td>Математика</td><td>302</td></tr>
                    <tr><td>13:45-14:30</td><td>Англ. мова</td><td>320/118</td></tr>
                    <tr><td>14:45-15:30</td><td>Заруб. літ.</td><td>217</td></tr>
                    <tr><td>15:40-16:25</td><td>Укр. мова</td><td>304</td></tr>
                </table>
            </div>
            
            <div id="wednesday" class="day-schedule">
                <h2>Середа</h2>
                 <table>
                    <tr><th>Час</th><th>Урок</th><th>Кабінет</th></tr>
                    <tr><td>13:45-14:30</td><td>Образотворче мистецтво</td><td>Дист</td></tr>
                    <tr class="odd-week"><td>14:40-15:25</td><td>Англ. мова</td><td>Дист</td></tr>
                    <tr class="even-week"><td>14:45-15:30</td><td>Інформатика</td><td>Дист</td></tr>
                    <tr><td>15:40-16:25</td><td>Безпека життедіяльності</td><td>Дист</td></tr>
                    <tr><td>16:35-17:20</td><td>Фізкультура</td><td>Дист</td></tr>
                    <tr><td>16:25-18:10</td><td>Математика</td><td>Дист</td></tr>
                    <tr class="odd-week"><td>18:15-19:00</td><td>Етика</td><td>Дист</td></tr>
                    <!-- <tr class="even-week"><td></td><td></td><td></td></tr> -->
                </table>
            </div>

            <div id="thursday" class="day-schedule">
                 <h2>Четвер</h2>
                <table>
                    <tr><th>Час</th><th>Урок</th><th>Кабінет</th></tr>
                    <tr><td>11:50-12:35</td><td>Технології</td><td>116/118</td></tr>
                    <tr><td>12:45-13:30</td><td>Укр. Мова</td><td>304</td></tr>
                    <tr><td>13:45-14:30</td><td>Зарубіжна літ.</td><td>318</td></tr>
                    <tr><td>14:40-15:25</td><td>Математика</td><td>204</td></tr>
                    <tr><td>15:40-16:25</td><td>Пізнаємо природу</td><td>319</td></tr>
                    <tr><td>16:35-17:20</td><td>Історія</td><td>302</td></tr>
                    <tr><td>17:25-18:10</td><td>Музика</td><td>Дист.</td></tr>
                </table>
            </div>

            <div id="friday" class="day-schedule">
                <h2>П'ятниця</h2>
                 <table>
                    <tr><th>Час</th><th>Урок</th><th>Кабінет</th></tr>
                    <tr><td>12:45-13:30</td><td>Укр. Мова</td><td>304</td></tr>
                    <tr><td>13:45-14:30</td><td>Математика</td><td>204</td></tr>
                    <tr><td>14:40-15:25</td><td>Англ. мова</td><td>320/313</td></tr>
                    <tr><td>15:40-16:25</td><td>Фізкультура</td><td></td></tr>
                    <tr><td>16:35-17:20</td><td>Укр. літ.</td><td>304</td></tr>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Функція для визначення парності тижня (по номеру тижня в році ISO 8601)
        function isEvenWeek() {
            const today = new Date();
            today.setDate(today.getDate() + 3 - (today.getDay() + 6) % 7);
            const weekNumber = today.getWeek(); 
            return weekNumber % 2 === 0;
        }

        Date.prototype.getWeek = function() {
            const date = new Date(this.valueOf());
            date.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7);
            const week1 = new Date(date.getFullYear(), 0, 4);
            return 1 + Math.round(((date.getTime() - week1.getTime()) / 86400000 - 3 + (week1.getDay() + 6) % 7) / 7);
        };

        // --- Основна функція відображення розкладу з фільтрацією ---
        // Аргументи: 
        // mode: 'today', 'odd' (непарний тиждень повністю), 'even' (парний тиждень повністю)
        function displaySchedule(mode) {
            // Очищаємо контейнер від попереднього контенту
            document.getElementById('schedule-container').innerHTML = '';
            document.getElementById('no-schedule-message').style.display = 'none';
            document.getElementById('week-status').style.display = 'block';

            const currentWeekIsEven = isEvenWeek();
            // Оновлюємо статус тижня українською мовою
            document.getElementById('week-status').textContent = currentWeekIsEven ? 
                "Поточний тиждень: Парний." : 
                "Поточний тиждень: Непарний.";

            let daysToShow = [];
            let filterByEvenWeek = null;

            if (mode === 'today') {
                const todayIndex = new Date().getDay();
                const daysMap = { 1: 'monday', 2: 'tuesday', 3: 'wednesday', 4: 'thursday', 5: 'friday' };
                const todayId = daysMap[todayIndex];
                if (todayId) daysToShow.push(todayId);
                filterByEvenWeek = currentWeekIsEven; 
                document.getElementById('main-title').textContent = "Розклад на сьогодні";

            } else if (mode === 'even') {
                daysToShow = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];
                filterByEvenWeek = true; // Фільтруємо як парний тиждень
                 document.getElementById('main-title').textContent = "Повний розклад (Парний тиждень)";

            } else if (mode === 'odd') {
                daysToShow = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];
                filterByEvenWeek = false; // Фільтруємо як непарний тиждень
                 document.getElementById('main-title').textContent = "Повний розклад (Непарний тиждень)";
            }

            
            if (daysToShow.length === 0) {
                document.getElementById('no-schedule-message').style.display = 'block';
                return;
            }

            daysToShow.forEach(dayId => {
                const todayScheduleTemplate = document.getElementById(dayId);
                if (!todayScheduleTemplate) return;

                const clone = todayScheduleTemplate.cloneNode(true);
                
                // Фільтруємо рядки (уроки) в клонованій таблиці
                const rows = clone.querySelectorAll('table tr');
                rows.forEach(row => {
                    const isOddRow = row.classList.contains('odd-week');
                    const isEvenRow = row.classList.contains('even-week');

                    if (isOddRow || isEvenRow) {
                        if (filterByEvenWeek !== null) {
                             if ((isOddRow && filterByEvenWeek) || (isEvenRow && !filterByEvenWeek)) {
                                row.style.display = 'none'; 
                            } else {
                                row.style.display = ''; // Показуємо відповідний рядок
                            }
                        }
                    }
                });

                clone.classList.add('active'); // Робимо клон видимим через CSS-клас
                document.getElementById('schedule-container').appendChild(clone);
            });
            
            // Оновлюємо активну кнопку в інтерфейсі
            updateActiveButton(mode);
        }

        // Функція для керування активним станом кнопок
        function updateActiveButton(activeMode) {
            document.querySelectorAll('.button-group button').forEach(button => {
                button.classList.remove('active');
            });
            document.getElementById('btn-' + activeMode).classList.add('active');
        }

        // Ініціалізація: показуємо розклад на поточний день при завантаженні
        document.addEventListener('DOMContentLoaded', () => {
            displaySchedule('today');
            
            // Прив'язуємо функції до кнопок
            document.getElementById('btn-today').addEventListener('click', () => displaySchedule('today'));
            document.getElementById('btn-odd-week').addEventListener('click', () => displaySchedule('odd'));
            document.getElementById('btn-even-week').addEventListener('click', () => displaySchedule('even'));
        });
    </script>

</body>
</html>
